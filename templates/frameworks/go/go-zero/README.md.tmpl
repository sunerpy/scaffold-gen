# {{ProjectName}}

A go-zero based microservice project generated by Scaffold-Gen.

## Features

- ğŸš€ High-performance microservice framework
- ğŸ“ Automatic API documentation
- ğŸ”§ Built-in service discovery
- ğŸ›¡ï¸ Circuit breaker and rate limiting
- ğŸ“Š Monitoring and tracing
- ğŸ³ Docker support

## Project Structure

```
{{ProjectName}}/
â”œâ”€â”€ api/                   # HTTP API service
â”‚  â”œâ”€â”€ internal/
â”‚  â”‚  â”œâ”€â”€ handler/      # HTTP handlers
â”‚  â”‚  â”œâ”€â”€ logic/        # Business logic
â”‚  â”‚  â”œâ”€â”€ svc/          # Service context
â”‚  â”‚  â”œâ”€â”€ types/        # Request/Response types
â”‚  â”‚  â””â”€â”€ config/       # Configuration
â”‚  â”œâ”€â”€ api.api           # API definition
â”‚  â””â”€â”€ main.go           # API service entry
â”œâ”€â”€ rpc/                  # gRPC service
â”‚  â””â”€â”€ {{ProjectName}}.proto    # Protocol buffer definition
â”œâ”€â”€ model/                # Data models
â”œâ”€â”€ common/               # Common utilities
â”‚  â”œâ”€â”€ errorx/          # Error handling
â”‚  â”œâ”€â”€ response/        # Response utilities
â”‚  â””â”€â”€ middleware/      # Custom middleware
â”œâ”€â”€ etc/                  # Configuration files
â””â”€â”€ deploy/               # Deployment files
    â”œâ”€â”€ docker/          # Docker files
    â””â”€â”€ k8s/             # Kubernetes manifests
```

## Quick Start

### Prerequisites

- Go 1.21 or higher
- goctl (go-zero CLI tool)
- Docker (optional)

### Installation

1. Install goctl:
```bash
go install github.com/zeromicro/go-zero/tools/goctl@latest
```

2. Install dependencies:
```bash
go mod tidy
```

### Development

#### API Service

1. Generate API code (if you modify api.api):
```bash
chmod +x generate-api.sh
./generate-api.sh
```

2. Run API service:
```bash
cd api
go run main.go -f etc/api.yaml
```

3. Test the API:
```bash
curl http://{{DefaultHost}}:{{DefaultPort}}/health
curl http://{{DefaultHost}}:{{DefaultPort}}/api/v1/ping
```

#### RPC Service

1. Generate RPC code (if you modify .proto files):
```bash
chmod +x generate-rpc.sh
./generate-rpc.sh
```

2. Run RPC service:
```bash
cd rpc
go run main.go -f etc/rpc.yaml
```

### Docker Deployment

1. Build and run with Docker Compose:
```bash
cd deploy/docker
docker-compose up -d
```

## Configuration

### API Service Configuration (etc/api.yaml)

```yaml
Name: api
Host: {{Host}}
Port: {{Port}}
```

### RPC Service Configuration (etc/rpc.yaml)

```yaml
Name: {{ProjectName}}.rpc
ListenOn: {{GrpcHost}}:{{GrpcPort}}
```

## API Documentation

The API is defined in `api/api.api`. Key endpoints:

- `GET /health` - Health check
- `GET /api/v1/ping` - Ping endpoint

## Development Guide

### Adding New API Endpoints

1. Update `api/api.api` with new endpoint definitions
2. Run `./generate-api.sh` to generate code
3. Implement business logic in the generated logic files

### Adding New RPC Services

1. Update `rpc/{{ProjectName}}.proto` with new service definitions
2. Run `./generate-rpc.sh` to generate code
3. Implement service logic in the generated files

### Database Integration

1. Add database configuration to config files
2. Use goctl to generate model code:
```bash
goctl model mysql datasource -url="user:password@tcp(127.0.0.1:3306)/database" -table="table_name" -dir="./model"
```

## Monitoring and Observability

go-zero provides built-in support for:

- Prometheus metrics
- Jaeger tracing
- Log collection
- Health checks

## License

This project is licensed under the MIT License.
