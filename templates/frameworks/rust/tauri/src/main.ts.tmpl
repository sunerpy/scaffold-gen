import { createApp } from "vue";
import { createPinia } from "pinia";
import "element-plus/dist/index.css";
import "element-plus/theme-chalk/dark/css-vars.css";
import App from "./App.vue";
import router from "./router";
import "./styles/tailwind.css";
import "./styles/global.css";
import "./styles/theme.scss";
import { useElementPlus } from "./plugins/elementPlus";
import { useI18n } from "./utils/i18n";
import { debug } from "@tauri-apps/plugin-log";

// 禁用右键菜单
document.addEventListener("contextmenu", e => {
  e.preventDefault();
});

const app = createApp(App);
const pinia = createPinia();

app.use(pinia).use(router).use(useElementPlus).use(useI18n).mount("#app");

// 初始化窗口状态
(async () => {
  debug("Initializing application...");

  try {
    const { getCurrentWindow } = await import("@tauri-apps/api/window");
    const appWindow = getCurrentWindow();
    await appWindow.setFullscreen(false);
    debug("Window initialized successfully");
  } catch (err) {
    debug(`Failed to initialize window state: ${err}`);
  }
})();
